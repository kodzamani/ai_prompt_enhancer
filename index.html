<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Prompt Enhancer</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <!-- History Sidebar -->
  <div class="sidebar-overlay" id="sidebarOverlay"></div>
  <aside class="sidebar" id="historySidebar">
    <div class="sidebar-header">
      <h2>Prompt History</h2>
      <button class="sidebar-close" id="closeSidebar" aria-label="Close history">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    <div class="sidebar-content" id="historyList">
      <!-- History items will be rendered here -->
    </div>
    <div class="sidebar-footer">
      <button class="btn btn-danger btn-sm" id="clearHistoryBtn">
        <img src="icons/delete_2_line.svg" width="16" height="16" alt="">
        Clear All History
      </button>
    </div>
  </aside>

  <div class="app-wrapper" id="appWrapper">
    <div class="container">
      <header>
        <div class="header-row">
          <div class="header-left">
            <button class="menu-btn" id="historyBtn" aria-label="Open history">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <line x1="3" y1="12" x2="21" y2="12"></line>
                <line x1="3" y1="6" x2="21" y2="6"></line>
                <line x1="3" y1="18" x2="21" y2="18"></line>
              </svg>
            </button>
            <div class="header-content">

              <div class="title-bar">
                <h1>AI Prompt Enhancer</h1>
                <div class="model-badge" id="modelBadge">
                  <svg xmlns='http://www.w3.org/2000/svg' width='16px' height='16px' viewBox='0 0 24 24'>
                    <title>brain_line</title>
                    <g id="brain_line" fill='none' fill-rule='evenodd'>
                      <path
                        d='M24 0v24H0V0zM12.594 23.258l-.012.002-.071.035-.02.004-.014-.004-.071-.036c-.01-.003-.019 0-.024.006l-.004.01-.017.428.005.02.01.013.104.074.015.004.012-.004.104-.074.012-.016.004-.017-.017-.427c-.002-.01-.009-.017-.016-.018m.264-.113-.014.002-.184.093-.01.01-.003.011.018.43.005.012.008.008.201.092c.012.004.023 0 .029-.008l.004-.014-.034-.614c-.003-.012-.01-.02-.02-.022m-.715.002a.023.023 0 0 0-.027.006l-.006.014-.034.614c0 .012.007.02.017.024l.015-.002.201-.093.01-.008.003-.011.018-.43-.003-.012-.01-.01z' />
                      <path fill='#09244BFF'
                        d='M9 3a4 4 0 0 0-4 4v1.126a4.002 4.002 0 0 0 0 7.748V17a4 4 0 0 0 7 2.646A4 4 0 0 0 19 17v-1.126a4.002 4.002 0 0 0 0-7.748V7a4 4 0 0 0-7-2.646A3.99 3.99 0 0 0 9 3m8 6V7a2 2 0 1 0-4 0v4.535A3.982 3.982 0 0 1 15 11a1 1 0 1 1 0 2 2 2 0 0 0-2 2v2a2 2 0 1 0 4 0v-1.126a3.947 3.947 0 0 1-.333-.102 1 1 0 1 1 .666-1.886A2 2 0 1 0 18 10a1 1 0 0 1-1-1m-8 4a2 2 0 0 1 2 2v2a2 2 0 1 1-4 0v-1.126c.113-.03.224-.063.333-.102a1 1 0 1 0-.666-1.886A2 2 0 1 1 6 10a1 1 0 0 0 1-1V7a2 2 0 1 1 4 0v4.535A3.982 3.982 0 0 0 9 11a1 1 0 1 0 0 2' />
                    </g>
                  </svg>
                  <span id="modelBadgeText">No model selected</span>
                </div>
              </div>

              <p class="subtitle">Transform your prompts for Cursor, Antigravity & other AI coding assistants</p>

            </div>
          </div>

          <button class="settings-btn" id="settingsBtn" aria-label="Settings">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="3"></circle>
              <path
                d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
              </path>
            </svg>
          </button>
        </div>
      </header>

      <section class="prompt-section">
        <label for="inputPrompt">Your Prompt</label>
        <textarea id="inputPrompt"
          placeholder="Enter your prompt here... For example:&#10;&#10;Bir e-ticaret sitesi yap, ürün listesi olsun, sepet olsun, ödeme sayfası olsun"></textarea>
      </section>

      <div class="button-row">
        <button class="btn btn-primary" id="enhanceBtn" disabled>
          <svg xmlns='http://www.w3.org/2000/svg' width='16px' height='16px' viewBox='0 0 24 24'>
            <g id="paint_brush_ai_line" fill='none' fill-rule='evenodd'>
              <path
                d='M24 0v24H0V0zM12.594 23.258l-.012.002-.071.035-.02.004-.014-.004-.071-.036c-.01-.003-.019 0-.024.006l-.004.01-.017.428.005.02.01.013.104.074.015.004.012-.004.104-.074.012-.016.004-.017-.017-.427c-.002-.01-.009-.017-.016-.018m.264-.113-.014.002-.184.093-.01.01-.003.011.018.43.005.012.008.008.201.092c.012.004.023 0 .029-.008l.004-.014-.034-.614c-.003-.012-.01-.02-.02-.022m-.715.002a.023.023 0 0 0-.027.006l-.006.014-.034.614c0 .012.007.02.017.024l.015-.002.201-.093.01-.008.003-.011.018-.43-.003-.012-.01-.01z' />
              <path fill='#09244BFF'
                d='M20.626 2.483a1.094 1.094 0 0 1 1.39 1.39l-.165.471-.187.504-.237.607-.184.452-.205.482-.11.25-.233.513c-.679 1.455-1.612 3.156-2.728 4.33-1.065 1.12-2.673 2.153-3.96 2.886a4.995 4.995 0 0 1-1.36 4.557c-2.27 2.27-4.807 2.27-6.694 1.71a9.068 9.068 0 0 1-2.864-1.43l-.28-.223-.585-.495a.394.394 0 0 1 .027-.624l.332-.237c.728-.53 1.479-1.182 1.658-2.08.033-.166.055-.334.073-.502l.05-.507a5.6 5.6 0 0 1 .074-.504c.138-.689.43-1.471 1.137-2.18a4.996 4.996 0 0 1 4.557-1.36c.733-1.287 1.765-2.895 2.886-3.96 1.174-1.116 2.875-2.05 4.33-2.728l.513-.233.494-.215.69-.285.415-.163.696-.26zm-9.394 10.785a3 3 0 0 0-4.242 0c-.353.352-.506.734-.591 1.157a5.591 5.591 0 0 0-.073.504l-.025.253c-.024.253-.049.507-.099.757-.18.904-.709 1.65-1.15 2.148a7.29 7.29 0 0 0 1.471.63c1.384.412 3.09.412 4.71-1.207a3 3 0 0 0 0-4.242m1.479-3.165c-.259.395-.505.798-.732 1.19a5.028 5.028 0 0 1 1.228 1.228c.391-.227.795-.473 1.19-.732l-.03-.067a3.31 3.31 0 0 0-.66-.93 3.351 3.351 0 0 0-.817-.603zm6.71-5.025c-.383.159-.799.34-1.229.54-1.408.657-2.866 1.48-3.796 2.364-.157.15-.314.315-.47.493.362.2.782.49 1.195.904.414.413.703.833.904 1.195.178-.156.344-.313.493-.47.884-.93 1.707-2.388 2.364-3.797.2-.43.38-.846.54-1.229M6 1a1 1 0 0 1 .898.56l.048.117.13.378a3 3 0 0 0 1.684 1.8l.185.07.378.129a1 1 0 0 1 .117 1.844l-.117.048-.378.13a3 3 0 0 0-1.8 1.684l-.07.185-.129.378a1 1 0 0 1-1.844.117l-.048-.117-.13-.378a3 3 0 0 0-1.684-1.8l-.185-.07-.378-.129a1 1 0 0 1-.117-1.844l.117-.048.378-.13a3 3 0 0 0 1.8-1.684l.07-.185.129-.378A1 1 0 0 1 6 1m0 3.196A5.004 5.004 0 0 1 5.196 5c.298.236.568.506.804.804.236-.298.506-.568.804-.804A5.004 5.004 0 0 1 6 4.196' />
            </g>
          </svg>
          Enhance Prompt
        </button>
      </div>

      <div class="error-message" id="errorMessage"></div>
    </div>
  </div>

  <!-- Loading Overlay with Blur -->
  <div class="loading-overlay" id="loadingOverlay">
    <div class="loading-content">
      <div class="progress-container">
        <div class="progress-bar">
          <div class="progress-fill"></div>
        </div>
      </div>
      <p class="loading-text">Prompt is being prepared</p>
      <div class="loading-dots">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div class="modal-overlay" id="settingsModal">
    <div class="modal modal-settings">
      <div class="modal-header">
        <h2>Settings</h2>
        <button class="modal-close" id="closeSettings" aria-label="Close settings">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>

      <div class="modal-body">
        <!-- Provider Selection -->
        <div class="setting-group">
          <label>AI Provider</label>
          <div class="provider-options">
            <label class="provider-option">
              <input type="radio" name="provider" value="openrouter" checked>
              <span class="provider-label">OpenRouter</span>
            </label>
            <label class="provider-option">
              <input type="radio" name="provider" value="ollama">
              <span class="provider-label">Ollama</span>
            </label>
          </div>
        </div>

        <!-- OpenRouter Settings -->
        <div class="provider-settings" id="openrouterSettings">
          <div class="setting-group">
            <label for="apiKey">OpenRouter API Key</label>
            <div class="input-wrapper">
              <input type="password" id="apiKey" placeholder="sk-or-v1-..." autocomplete="off">
              <button class="toggle-visibility" id="toggleVisibility" type="button" aria-label="Toggle visibility">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                  stroke-linecap="round" stroke-linejoin="round" class="eye-icon">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                  stroke-linecap="round" stroke-linejoin="round" class="eye-off-icon" style="display: none;">
                  <path
                    d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24">
                  </path>
                  <line x1="1" y1="1" x2="23" y2="23"></line>
                </svg>
              </button>
            </div>
            <p class="setting-hint">Get your free API key from <a href="https://openrouter.ai/keys"
                target="_blank">openrouter.ai/keys</a></p>
          </div>
        </div>

        <!-- Ollama Settings -->
        <div class="provider-settings" id="ollamaSettings" style="display: none;">
          <div class="setting-group">
            <label for="ollamaUrl">Ollama Server URL</label>
            <input type="text" id="ollamaUrl" placeholder="http://localhost:11434" value="http://localhost:11434">
            <p class="setting-hint">Default: http://localhost:11434</p>
          </div>
        </div>

        <!-- Model Selection -->
        <div class="setting-group">
          <label for="modelSelect">AI Model</label>
          <div class="model-selection">
            <select id="modelSelect" disabled>
              <option value="">Select a model...</option>
            </select>
            <button class="btn btn-secondary btn-sm" id="loadModelsBtn">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path>
                <path d="M3 3v5h5"></path>
                <path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path>
                <path d="M16 21h5v-5"></path>
              </svg>
              Load Models
            </button>
          </div>
          <p class="setting-hint" id="modelHint">Select a provider and load available models</p>
        </div>

        <!-- Output Language -->
        <div class="setting-group">
          <label for="outputLanguage">Output Language</label>
          <select id="outputLanguage">
            <option value="Turkish">Türkçe</option>
            <option value="English" selected>English</option>
            <option value="Chinese">中文</option>
            <option value="French">Français</option>
            <option value="Korean">한국어</option>
            <option value="Japanese">日本語</option>
            <option value="Hindi">हिन्दी</option>
            <option value="Albanian">Shqip</option>
          </select>
          <p class="setting-hint">The enhanced prompt will be generated in this language</p>
        </div>
      </div>

      <div class="modal-footer">
        <div class="save-status" id="saveStatus"></div>
        <button class="btn btn-primary" id="saveSettings">Save Settings</button>
      </div>
    </div>
  </div>

  <!-- Output Modal -->
  <div class="modal-overlay" id="outputModal">
    <div class="modal modal-output">
      <div class="modal-header">
        <div class="modal-title-row">
          <svg class="success-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
            <polyline points="22 4 12 14.01 9 11.01"></polyline>
          </svg>
          <h2>Enhanced Prompt Ready</h2>
        </div>
        <div class="modal-header-actions">
          <span class="copy-feedback" id="copyFeedback">Copied!</span>
          <button class="btn btn-secondary btn-sm" id="copyBtn">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>
            Copy
          </button>
          <button class="modal-close" id="closeOutput" aria-label="Close">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>
      </div>

      <div class="modal-body output-body">
        <div class="output-content" id="outputContent"></div>
      </div>
    </div>
  </div>

  <!-- History Detail Modal -->
  <div class="modal-overlay" id="historyDetailModal">
    <div class="modal modal-history-detail">
      <div class="modal-header">
        <h2>Prompt Details</h2>
        <button class="modal-close" id="closeHistoryDetail" aria-label="Close">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>

      <div class="modal-body history-detail-body">
        <div class="history-detail-section">
          <div class="history-detail-label">
            <span>Input Prompt</span>
            <button class="btn btn-secondary btn-xs" id="copyInputBtn">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
              </svg>
              Copy
            </button>
          </div>
          <div class="history-detail-content" id="historyInputContent"></div>
        </div>
        <div class="history-detail-section">
          <div class="history-detail-label">
            <span>Enhanced Output</span>
            <button class="btn btn-secondary btn-xs" id="copyOutputBtn">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
              </svg>
              Copy
            </button>
          </div>
          <div class="history-detail-content" id="historyOutputContent"></div>
        </div>
      </div>
    </div>
  </div>

  <script src="renderer.js"></script>
</body>

</html>